# Подсчет активных углеводов COB

## Как AAPS вычисляет значение COB?

При вводе углеводов как части приема пищи или коррекции, AAPS добавляет их к текущим активным углеводам (COB). Затем AAPS поглощает (удаляет) углеводы на основе наблюдаемых отклонений от значений ГК. Степень поглощения зависит от чувствительности к углеводам. Это не величина профиля, но рассчитывается как ISF/IC и показывает на сколько мг/дл повысится ГК от приема 1г углеводов.

Применяемая формула: `поглощенные_углеводы = отклонение * ic / isf` Это означает:
* увеличение углеводного коэффициента IC увеличивает количество углеводов, поглощаемых каждые 5 минут, тем самым сокращая общее время поглощения
* увеличение фактора чувствительности к инсулину ISF снижает количество углеводов, поглощаемых каждые 5 минут, тем самым увеличивая общее время поглощения
* изменение профиля на % увеличивает/уменьшает обе величины и, таким образом, не влияет на время поглощения углеводов

Например, если ISF вашего профиля 100, а ваш IC - 5, ваш CSF будет 20. За каждые 20 мг/дл (чуть больше 1 ммоль/л) на которые поднимется ГК, AAPS спишет 1г углеводов. Положительное значение активного инсулина IOB также влияет на расчет. Таким образом, если AAPS рассчитывал, что ГК снизится на 20 мг/дл из-за активного инсулина IOB, а она не опустилась, он все равно спишет 1г углеводов.

Углеводы также поглощаются методами, описанными ниже, на основе выбранного алгоритма чувствительности.

### Oref1

Непоглощенные углеводы отбрасываются после указанного времени

![Oref1](../images/cob_oref0_orange_II.png)

### AAPS, Средневзвешенное значение

усвоение рассчитывается как `COB == 0` после заданного времени

![AAPS, WheitedAverage](../images/cob_aaps2_orange_II.png)

Если вместо значения, вычисленного из отклонений ГК, используется минимальное поглощение углеводов (min_5m_arbarimpact), на графике активных углеводов COB появится оранжевая точка.

(COB-calculation-detection-of-wrong-cob-values)=

## Обнаружение неправильного значения COB

AAPS предупреждает о том, что вы собираетесь подавать болюс при активных углеводах COB, оставшихся от предыдущего приема пищи, и алгоритм считает, что текущий расчет COB может быть неправильным. В этом случае он даст дополнительный подсказку на экране подтверждения калькулятора болюса.

### Как AndroidAPS обнаруживает неправильные значения активных углеводов COB?

Обычно AAPS обнаруживает усвоение углеводов через отклонения ГК. В случае, если вы ввели углеводы, но AAPS не может оценить их усвоение с помощью отклонений ГК, то для вычисления поглощения система будет использовать метод [min_5m_carbimpact](../Configuration/Config-Builder.md?highlight=min_5m_carbimpact#absorption-settings) (так называемый 'запасной вариант'). Поскольку этот метод вычисляет только минимальное поглощение углеводов без учета отклонений ГК, это может привести к неправильным значениям активных углеводов COB.

![Hint on wrong COB value](../images/Calculator_SlowCarbAbsorption.png)

На этом снимке экрана 41% времени поглощения углеводов был вычислен математически методом min_5m_carbimpact вместо значения, основанного на отклонениях ГК.  Это означает, что в организме может быть меньше активных углеводов, чем вычисляется алгоритмом.

### Как относиться к этому предупреждению?

- -Подумайте об отмене действия -нажмите кнопку Отмена, а не ОК.
- -Снова рассчитайте свой предстоящий прием пищи с помощью калькулятора болюса, сняв галочку с активных углеводов COB.
- -Если вы уверены, что нужен болюс на коррекцию, введите его вручную.
- -В любом случае, будьте осторожны, чтобы не допустить передозировки!

### Почему алгоритм неправильно распознает активные углеводы COB?

- -Возможно, вы переоценили количество углеводов при их вводе.
- Активность/нагрузка после предыдущего приема пищи
- -Углеводный коэффициент I:C нуждается в корректировке
- Значение для min_5m_carbimpact неверно (рекомендуется 8 для алгоритма SMB, 3 для OpenAPS AMA)

## Ручная коррекция введенных углеводов

Если вы переоценили или недооценили количество углеводов, это можно исправить на вкладке назначений и вкладке Действия как описано [здесь](Screenshots-carb-correction).
