# Прохождение целей

**AAPS** имеет ряд **целей**, которые необходимо выполнить, чтобы перейти от базового открытого цикла к гибридному закрытому циклу и полной функциональности **AAPS**. Выполнение **целей** удостоверяет:

- Что вы всё правильно настроили в **AAPS**
- Вы изучили основной функционал **AAPS**
- У вас есть базовое понимание того, что делает ваша система, и, следовательно, почему вы можете ей доверять.

:::{admonition} Примечание

Регулярно делайте экспорт настроек **AAPS** после выполнения каждой **цели**!
:::

Настоятельно рекомендуем [экспортировать настройки](../Usage/ExportImportSettings.md) после завершения каждой **цели**. В процессе экспорта создается файл **настроек** (.json), резервную копию которого следует сохранить в одном или нескольких безопасных местах (_например, Google Drive, жёсткий диск, вложение к электронной почте _и т. д._). Это гарантирует сохранение прогресса в достижении **целей**, возможность легко восстановить его в случае случайного удаления, при помощи импорта последнего файла настроек. Наличие резервной копии файла **настроек** также пригодится, если вы хотите сменить смартфон **AAPS** по какой-либо причине (обновление/потеря/сломанный телефон _и т. д._)

В файле **settings** будет сохраняться не только ваш прогресс в выполнении целей обучения, но и ваши собственные настройки **AAPS**, такие как **максимальный болюс** _и т. д._

Если у вас не будет резервной копии **настроек**, и если что-нибудь случится со смартфоном **AAPS**, вам придется проходить **цели обучения** с самого начала.

В целом, выполнение **целей обучения** занимает около 6 недель (подробнее см. [сколько времени это может занять?](preparing-how-long-will-it-take?)) от настройки **AAPS** на смартфоне до "базового" гибридного замкнутого цикла (от цели 1 до цели 8), поэтому, хотя к **цели 5** и можно перейти, используя **виртуальную помпу** (при этом вводя инсулин каким-то другим методом), никому не хочется заново проходить все **цели** из-за потери или поломки телефона.

Помимо прохождения **целей обучения**, свое продвижение можно удалить и [вернуться к предыдущей цели](Objectives-go-back-in-objectives).

## Цель 1: Настройка визуализации и мониторинга, анализ базальной скорости и коэффициентов

- **AAPS** проверяет, работает ли ваши базовые настройки.

В противном случае вам придется перенастраивать до тех пор, пока базовая настройка не будет работать корректно для **AAPS**.

- Выберите правильный источник данных ГК CGMS/FGMS в [Конфигураторе](../Configuration/Config-Builder.md).  См. [источник СК](../Configuration/BG-Source.md) для дополнительной информации.
- Выберите помпу в [Конфигураторе](../Configuration/Config-Builder.md) и обеспечьте связь помпы с AAPS. Выберите **виртуальную помпу**, если используете помпу, работа которой не поддерживается в **AAPS** или если хотите пройти **цели обучения** заранее, пока используете другую систему введения инсулина. Дополнительную информацию см. в разделе [инсулиновая помпа](../Getting-Started/Pump-Choices.md).
- Следуйте инструкциям на странице [Nightscout](../Installing-AndroidAPS/Nightscout.md), чтобы убедиться, что **Nightscout** может получать и отображать данные.
- Обратите внимание, что URL-адрес в **NSClient** должен быть **_без_ "/api/v1/"** в конце — см. [Настройки NSClient] (Preferences-nsclient).

Возможно, потребуется дождаться следующего значения ГК, прежде чем AAPS распознает его и примет в обработку.\*

## Цель 2: Научитесь контролировать AAPS

- Выполните следующие шаги в **AAPS**, как описано в этой **цели**.
- Нажмите на оранжевый текст «Не завершено» для доступа к каждому заданию.
- Если вы еще не знаете как выполнить действие, вам будут предоставлены ссылки на инструкции.

  ```{image} ../images/Objective2_V2_5.png
  :alt: снимок экрана Цель 2
  ```
- Задачи для выполнения **Цели 2**:
  - Установите свой профиль в 90% на 10 минут (_Подсказка_: нажмите и удерживайте на имени своего профиля на экране НАЧАЛО) (_Примечание_: AAPS не принимает базальные дозы ниже 0,05 ЕД/ч. Если ваш профиль содержит базальные дозы 0,06 ЕД/ч или ниже, вам потребуется создать новый профиль с более высокими базальными дозами, прежде чем выполнять эту задачу. Вернитесь к своему обычному профилю после выполнения этого задания.)
  - Симитируйте «принятие душа», отключив помпу в **AAPS** на 1 час (_Подсказка_: нажмите значок петли на экране НАЧАЛО, чтобы открыть диалоговое окно «Цикл»)
  - Завершите приём душа, повторно подключив помпу (_Подсказка_: нажмите на значок «Разъединено», чтобы открыть диалоговое окно цикла)
  - Создайте временную цель c продолжительностью 10 минут (_Подсказка_: нажмите на панель цели в экране НАЧАЛО, чтобы открыть диалоговое окно временной цели)
  - Активируйте плагин **ДЕЙСТВИЯ** в **Конфигураторе**, чтобы он появился в верхней строке прокручиваемого меню (_Подсказка_: перейдите в **Конфигуратор** и прокрутите вниз до пункта «Общее»)
  - Отобразите содержимое плагина Замкнутый Цикл
  - Масштабируйте диаграмму ГК, переключаясь между 6 часами, 12 часами, 18 часами и 24 часами данных за прошедшее время (_Подсказка_: короткое касание графика)

(Objectives-objective-3-prove-your-knowledge)=

## Цель 3: Подтвердите ваши знания

- Пройдите тест с выбором варианта ответа для проверки на знание AndroidAPS.

Некоторые пользователи считают **Цель 3** самой трудной. Прочитайте документацию **AAPS** вместе с вопросами. Если вы надолго застряли на цели после изучения документации **AAPS**, можете выполнить поиск в группе Facebook по запросу «Цель 3» (вполне вероятно, что ваш вопрос уже задавался и на него уже был дан ответ). Если вы все ещё застряли, спросите в группе Facebook или Discord. Эти группы могут дать подсказки или перенаправить вас на соответствующую часть документации AAPS.

Чтобы приступить к реализации цели 3, нажмите на оранжевый текст «Не завершено», чтобы получить доступ к соответствующему вопросу. Прочтите внимательно все вопросы и выберите ответ(ы).

- Чтобы уменьшить количество предлагаемых изменений базальной скорости в режиме открытого цикла, установите более широкий целевой диапазон, например 90–150 мг/дл или 5,0–8,5 ммоль/л.

- Вы можете увеличить верхнюю границу диапазона на ночь или вовсе отключить цикл на это время.

Для каждого вопроса правильным может быть больше одного ответа! Если выбран неверный ответ, вопрос будет заблокирован на определенное время (60 минут), прежде чем вы сможете вернуться и ответить на вопрос. Имейте в виду, что порядок ответов может измениться при следующей попытке ответа,, чтобы убедиться, что вы внимательно прочитали их и действительно понимали правильность (или нет) каждого ответа.

Когда **AAPS** устанавливается в первый раз, необходимо полностью пройти **цель 3** для того, чтобы перейти к **цели 4**. Каждая цель должна быть выполнена в последовательном порядке. Постепенно, по мере преодоления целей, будут открываться новые возможности приложения.

:::{admonition}  **Что произойдет, если к Цели добавятся новые вопросы при обновлении до более новой версии APPS?**
:class: Note
Время от времени в **AAPS** добавляется новая функциональность, что может потребовать добавления нового вопроса к Целям обучения, особенно к Цели 3. В результате любой новый вопрос, добавленный к **Цели 3**, будет помечен как «незавершённый», поскольку **AAPS** потребует от вас выполнить это действие. Не волнуйтесь, поскольку каждая **Цель** независима, вы **не потеряете существующую функциональность AAPS**, при условии, что другие Цели останутся выполненными.
:::

## Цель 4: Начните с открытого цикла

Эта цель обучения нужна, чтобы показать, как часто **AAPS** будет оценивать влияние базальной дозы на уровень гликемии и как часто он рекомендует изменить базальную скорость. В рамках этой цели обучения вы впервые активируете открытый цикл, и вручную смените скорость временного базала до 20 раз. Кроме того, вы увидите влияние временных целей и Временных Целей По Умолчанию (например, при физической нагрузке или гипотерапии). Если вы еще не знакомы со сменой временной базальной скорости в **AAPS**, обратитесь к [вкладке ДЕЙСТВИЯ](Screenshots#Screenshots-action-tab).

Расчетное время для прохождения этой цели: **7 дней**. Это обязательное время ожидания. Вы не сможете перейти к следующей цели раньше, даже если выполнили все изменения базальной скорости.

- Выберите «ОТКРЫТЫЙ ЦИКЛ» либо в меню «Настройки», либо нажав и удерживая значок «Цикл» в левой верхней части экрана НАЧАЛО.
- Просмотрите [Настройки](../Configuration/Preferences.md), чтобы настроить его для себя (прокрутите вниз до «Режим APS» и выберите «ОТКРЫТЫЙ ЦИКЛ».
- Вручную активируйте по крайней мере 20 предложений временного базала на протяжении 7 дней, введите их в помпу (физическую) и подтвердите в AAPS что вы их приняли. Убедитесь, что эти изменения базальной дозы отображаются в AAPS и Nightscout.
- При необходимости включите [временные Цели](../Usage/temptarget.md). После купирования гипогликемии используйте Временную Цель Гипо, чтобы предотвратить чрезмерную коррекцию системы при откате (при постгипогликемической гипергликемии).

### Сократите количество уведомлений

- Чтобы уменьшить количество предлагаемых изменений базальной скорости в режиме открытого цикла, установите более широкий целевой диапазон, например 90–150 мг/дл или 5,0–8,5 ммоль/л.
- Вы можете увеличить верхнюю границу диапазона на ночь (или вовсе отключить открытый цикл на это время).
- Вы можете установить минимальный процент предлагаемых изменений базальной скорости, чтобы повлиять на количество уведомлений.

  ```{image} ../images/OpenLoop_MinimalRequestChange2.png
  :alt: изменение минимального запроса на незамкнутом цикле
  ```

:::{admonition} Нет необходимости применять каждую рекомендацию системы!
:class: Примечание
:::

(Objectives-objective-5-Understanding-your-open-loop-including-its-temp-basal-recommendations)=

## Цель 5: Глубже понимаем работу системы в режиме незамкнутого цикла, включая ее рекомендации по временным базалам

В **Цели 5** вы начнете понимать, как формируются рекомендации по временному базальному инсулину. Сюда входит [определение логики базальной скорости](https\://openaps.readthedocs.io/en/latest/docs/While%20You%20Wait%20For%20Gear/Understand-determine-basal. tml), анализ влияния с помощью наблюдения [линий прогноза в AAPS OVERVIEW](Screenshots-prediction-lines)/Nightscout и детальных расчетов, показанных на вкладке OPENAPS.

Расчетное время для прохождения этой цели: 7 дней.

Эта цель требует, чтобы вы определили и установили "максимально возможную для установки величину временного базала" (макс базал) согласно описанию в [OpenAPS-features](Open-APS-features#Open-APS-features-max-u-h-a-temp-basal-can-be-set-to-openaps-max-basal). Это значение может быть установлено в Настройках > OpenAPS.
Убедитесь, что эта настройка безопасности установлена как в **AAPS**, так и в помпе.

Целевые значения гликемии следует несколько завысить до тех пор, пока вы не убедитесь в правильности всех вычислений и настроек.

**AAPS** допускает:

- установить нижнюю границу целевого значения ГК в диапазоне между 4 ммоль/л (72 мг/дл) и 10 ммоль/л (180 мг/дл)
- установить верхнюю границу целевого значения ГК в диапазоне между 5 ммоль/л (90 мг/дл) и 15 ммоль/л (225 мг/дл)
- временная цель может иметь любое значение от 4 до 15ммоль (72 мг/дл до 225 мг/дл)

Ваша цель является основным значением. Все расчеты основаны на нем. Оно отличается от целевого диапазона, в котором вы обычно стремитесь поддерживать значения уровня глюкозы в крови. Если целевой диапазон широк (скажем, 3 или более ммоль/л [50 мг/дл или более]), реакция **AAPS** незначительна. Это связано с тем, что, по прогнозам уровня глюкозы он всё ещё находится где-то в этом широком диапазоне, и поэтому, временные изменения базальной скорости предлагаются редко.

Можно поэкспериментировать и задать более близкие значения (например, чтобы их разность не превышала 1 ммоль) и наблюдать, как в результате изменится поведение системы.

Вы можете скорректировать (расширить или сузить) зеленую область графика, представляющую ваш целевой диапазон, введя значения в [Настройки](../Configuration/Preferences.md) > Диапазон для визуализации.

```{image} ../images/sign_stop.png
:alt: знак "Стоп"
```

:::{admonition} Если до этого вы использовали виртуальную помпу, переключитесь на настоящую инсулиновую помпу прямо сейчас!

Если вы используете открытый цикл с виртуальной помпой, остановитесь на этой цели. Нажмите «Подтвердить» в конце этой цели только после того, как перейдете на использование «настоящей» физической помпы.
:::

```{image} ../images/blank.png
:alt: пусто
```

(Objectives-objective-6-starting-to-close-the-loop-with-low-glucose-suspend)=

## Цель 6: Начинаем замыкать цикл с Low Glucose Suspend (прекращением подачи инсулина на низких сахарах)

```{image} ../images/sign_warning.png
:alt: предупреждающий знак
```

:::{admonition}  Замкнутый цикл не будет корректировать высокие значения ГК в цели 6, поскольку он ограничен только приостановкой на низком уровне глюкозы!
:class: Примечание
Вам придётся корректировать высокие значения ГК самостоятельно (вручную с помощью помпы или ручки)!
:::

В рамках **Цели 6** вы замкнёте цикл и активируете режим приостановки помпы на низкой ГК (LGS), пока значение [max IOB](Open-APS-features-maximum-total-iob-openaps-cant-go-over- openaps-max-iob) установлено на ноль. Для достижения этой цели вы должны оставаться в режиме LGS в течение 5 дней. Следует использовать это время, чтобы убедиться в правильности настроек профиля и что события по приостановке помпы на низкой ГК не запускаются слишком часто.

Расчетное время для прохождения этой цели: 5 дней.

Крайне важно, чтобы текущие параметры профиля (базал, ISF, IC) были тщательно протестированы, прежде чем вы закроете цикл в режиме приостановки помпы на низком ГК. Неправильные настройки профиля могут привести к гипогликемиям, которые придется купировать вручную. Точные настройки профиля помогут избежать необходимости в купировании гипогликемии в течение 5-дневного периода.

**Если эпизоды низкой гликемии все же сохраняются, поправьте параметры DIA (продолжительность действия инсулина), скорость базала, ISF (фактор чувствительности к инсулину) и пропорции инсулин-углеводы.**

Во время выполнения цели 6 **AAPS** обнуляет maxIOB. **Это переопределение будет отменено при переходе к цели 7.**

Это означает, что при выполнении цели 6, если уровень глюкозы падает, **AAPS** снизит количество базального инсулина. Если уровень глюкозы сенсора повышается, **AAPS** увеличит базальную дозу выше значения вашего профиля только в том случае, если базальный IOB отрицательный в результате предыдущей Приостановки помпы на Низкой ГК (LGS). В противном случае, **AAPS** не увеличит базальную скорость вашего профиля, даже если уровень глюкозы растёт. Эта сделано, чтобы избежать гипогликемии, когда вы только учитесь пользоваться **AAPS**.

**Как следствие, вам придётся корректировать высокие значения глюкозы вручную, через болюс.**

- Если ваш базальный IOB отрицательный (см. снимок экрана ниже), временная базальная скорость (TBR) > 100% может быть активирована в цели 6.

```{image} ../images/Objective6_negIOB.png
:alt: Пример отрицательного IOB
```

- В качестве дополнительной предосторожности установите целевой диапазон немного шире, чем ваш обычный.
- Включите режим «РЕЖИМ ОСТАНОВКИ НА НИЗКИХ LGS» нажав и удерживая значок Цикла в правом верхнем углу главного экрана и выбрав значок «Приостановка помпы на низкой ГК».
- Активные временные базалы отображаются бирюзовым цветом на экране OVERVIEW в виде текста или как часть графика.
- Возможны временные пики вслед за мерами против гипогликемии без возможности увеличить базу на откате.

(Objectives-objective-7-tuning-the-closed-loop-raising-max-iob-above-0-and-gradually-lowering-bg-targets)=

## Цель 7: Настройка замкнутого цикла с поднятием макс величины IOB выше 0 и постепенным понижением целевой ГК

Для прохождения **Цели 7** нужно замкнуть цикл и повысить свой [maxIOB](Open-APS-features-maximum-total-iob-openaps-cant-go-over-openaps-max-iob). maxIOB был автоматически обнулен в **цели 6**. Сейчас это обнуление отменено. **AAPS** начнёт использовать заданное вами значение maxIOB для коррекции высоких значений глюкозы.

Расчётное время для прохождения этой цели: 1 день.

- В течение одного дня выберите "Замкнутый цикл" либо в [Настройках](../Configuration/Preferences.md), либо нажав и удерживая значок цикла в правом верхнем углу главного экрана НАЧАЛО.

- Поднимите значение "Максимальный суммарный активный инсулин которое не может превысить алгоритм OpenAPS " (в OpenAPS называется "max-iob") выше 0. Рекомендация по умолчанию - "средний болюс на прием пищи + 3-кратная максимальная базальная доза" (для алгоритма SMB) или "3-кратная максимальная базальная доза" (для более старого алгоритма AMA), но переходить к этому следует постепенно, пока не убедитесь, что настройки подходят для вас (максимальная базальная доза (в течение суток) = максимальное почасовое значение в любой временной отрезок дня).

Эта рекомендация должна рассматриваться как отправная точка. Если вы установили это значение в 3 раза и видите, что AAPS выдает слишком много инсулина при повышении уровня глюкозы, тогда уменьшите значение "Максимальное общее количество IOB, которое не может превысить OpenAPS ". Кроме того, если у вас значительная резистентность, поднимайте его с осторожностью.

```{image} ../images/MaxDailyBasal2.png
:alt: максимальный суточный базал
```

- Определив величину активного инсулина IOB, подходящую именно вам, понизьте целевое значение ГК до желаемого уровня.

(Objectives-objective-8-adjust-basals-and-ratios-if-needed-and-then-enable-autosens)=

## Цель 8: Настраиваем базал и коэффициенты с последующей активацией autosens

В этой цели вы проверите производительность своего профиля и будете использовать функцию авточувствительности autosens в качестве индикатора неправильных настроек.

Расчетное время для прохождения этой цели: 7 дней.

- Для разовой проверки точности настроек базала можно применить [autotune](https://openaps.readthedocs.io/en/latest/docs/Customize-Iterate/autotune.html) или выполнить традиционный базальный тест.
- Активируйте авточувствительность [autosens](../Usage/Open-APS-features.md) на 7 дней и понаблюдайте за тем, как ведет себя белая линия чувствительности к инсулину на графике экрана НАЧАЛО в результате нагрузок, гормонов и т. п.,не забывая о вкладке отчетов OpenAPS, где AAPS соответствующим образом корректирует базальные дозы и/или целевой ГК.

(Objectives-objective-9-enabling-additional-oref1-features-for-daytime-use-such-as-super-micro-bolus-smb)=

## Цель 9: Активация таких дополнительных функций для дневного времени как супер микро болюс SMB

При выполнении цели в качестве единственной главной функциональности будет использоваться «Супер микроболюс SMB ». После изучения документации, вы будете понимать, что такое микроболюсы SMB, как они работают, когда следует начать ими пользоваться и почему базал временно устанавливается на нуль после введения микроболюса (нулевой временный базал). Расчетное время для прохождения этой цели: 28 дней.

- Чтобы понимать концепцию микроболюсов SMB и нулевой временной базальной скорости, следует обязательно изучить [Раздел SMB в этой документации](Open-APS-features-super-micro-bolus-smb) и [обзор oref1 в openAPSdocs](https://openaps.readthedocs.io/en/latest/docs/Customize-Iterate/oref1.html).
- Затем, чтобы заставить микроболюсы SMB работать должным образом, следует поднять значение [maxIOB](Open-APS-features-maximum-total-iob-openaps-cant-go-over-openaps-max-iob). maxIOB теперь учитывает весь активный инсулин IOB, а не только накопленный базал. Этот порог приостанавливает микроболюсы до тех пор, пока активный инсулин IOB не упадет ниже этого значения (_например_ maxIOB установлен на 7 ЕД и подаётся болюс 8 ЕД на приём пищи: микроболюсы будут приостановлены и не будут вводиться, пока IOB не упадет ниже 7 ЕД). Хорошим началом является установка maxIOB = средний болюс на прием пищи + 3-кратная максимальная базальная доза ( максимальная базальная доза = максимальное значение базала за час в любой период дня - см. подробнее [цель 7](Objectives-objective-7-tuning-the-closed-loop-raising-max-iob-above-0-and-gradually-lowering-bg-targets)
- Установите параметр "min_5m_carbimpact" (Настройки > Настройки усваиваемости > min_5m_carbimpact) на 8 при переходе от алгоритма OpenAPS AMA к алгоритму OpenAPS SMB. Для AMA значение по умолчанию равно 3. Подробнее об этом параметре [здесь](../Configuration/Preferences.html#min-5m-carbimpact)

(Objectives-objective-10-automation)=

## Цель 10: Автоматизация

Для использования Автоматизации необходимо начать цель 10.

1. Сначала прочитайте страницу документации  [Автоматизация](../Usage/Automation.md).
2. Задайте самое базовое правило Автоматизации;
   например, срабатывание уведомления Android в течении нескольких минут:

- Выберите вкладку уведомления
- В правом верхнем углу меню выберите добавить правило
- Дайте название задаче "Моё первое уведомление"
- "отредактируйте" "условие"
  - нажмите на "+", чтобы добавить первое условие запуска
  - выберите "Time" и "OK", он создаст запись по умолчанию СЕГОДНЯ ЧАСЫ:МИНУТЫ
  - нажмите на MINUTE чтобы выставить время, которое сработает через несколько минут. Затем нажмите ok, чтобы закрыть
  - нажмите "Ok" для закрытия экрана условий запуска
- "Добавьте" - "Действие"
  - выберите "Уведомление", "OK"
  - нажмите "Уведомление" для редактирования сообщения (Msg), введите что-то вроде "Моя первая автоматизация"
- подождите, пока наступит установленное время и активирует уведомление (обратите внимание, что в зависимости от телефона оно может опоздать на несколько минут)

4. Потренируйтесь с созданием более полезных автоматизаций.

- В документации даётся несколько примеров, и по слову "automation" в группе Facebook можно найти снимки экранов. Поскольку большинство людей каждое утро перед школой/работой едят одно и то же, довольно распространенным вариантом использования может быть установка «цели-перед-завтраком», чтобы установить немного более низкую временную цель за 30 минут до завтрака. В этом случае условие, вероятно, будет включать "время повторения", которое заключается в выборе конкретных дней недели (понедельник, вторник, среда, четверг, пятница) и определенное время (06:30 утра). Действие будет состоять из "Начать врем цель" с установленным целевым значением продолжительностью 30 минут.

## Цель 11: Включение дополнительных функций для ежедневного использования, таких как модуль Dynamic Senstivity (DynISF).

- Убедитесь, что SMB работает правильно
- Прочитайте документацию по динамическому ISF [по ссылке](../Usage/DynamicISF.md)
- Найдите группы Facbook и Discord для обсуждения динамического ISF и ознакомьтесь с опытом и рекомендациями других пользователей.
- Включите **плагин DynamicISF** и определите соответствующую калибровку для Вашего организма. Рекомендуется начинать с значения ниже 100% по соображениям безопасности.

(Objectives-go-back-in-objectives)=

## Возможность возврата к предыдущим целям

Если вы по какой-либо причине хотите вернуться к более ранним целям, можете сделать это, нажав на "Сбросить пройденные".

```{image} ../images/Objective_ClearFinished.png
:alt: Вернуться в цели
```

## Цели в Android APS до версии 3.0

Одна из целей была удалена после выхода Android APS 3.0.  Для пользователей Android APS версии 2.8.2.1 на старых телефонах (версия ОС Android ниже 9) будет использован прежний набор целей, который можно найти [тут](../Usage/Objectives_old.md).
